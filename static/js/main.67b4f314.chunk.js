(this["webpackJsonpchat-group"]=this["webpackJsonpchat-group"]||[]).push([[0],{100:function(e,t,n){e.exports={footer:"SidebarFooter_footer__wblwI",username:"SidebarFooter_username__3Bw3x"}},101:function(e,t,n){e.exports={separator:"DateSeparator_separator__1htt2"}},12:function(e,t,n){e.exports={menu:"Menu_menu__3mo81",profile:"Menu_profile__R6n84",visible:"Menu_visible__1uZyl",option:"Menu_option__xyHpF",icon:"Menu_icon__3UihG"}},15:function(e,t,n){e.exports={title:"AddChannel_title__3cOAr",input:"AddChannel_input__3hpqW",textarea:"AddChannel_textarea__3qz5c",btn:"AddChannel_btn__18eo4",tags:"AddChannel_tags__34xYH",selected:"AddChannel_selected__2A19B",tag:"AddChannel_tag__3TcpW",remove:"AddChannel_remove__2ZVp-",tagInput:"AddChannel_tagInput__1rJsu",tagInputField:"AddChannel_tagInputField__1gW-K"}},150:function(e,t,n){},156:function(e,t,n){e.exports={loader:"Loader_loader__1OXgp",spin:"Loader_spin__1kj8a"}},163:function(e,t,n){},169:function(e,t,n){},20:function(e,t,n){e.exports={sidebarListItem:"ListItem_sidebarListItem__Tl17E",grid:"ListItem_grid__3ythY",sidebarListItemName:"ListItem_sidebarListItemName__2gyd1",uppercase:"ListItem_uppercase__E-K4V"}},27:function(e,t,n){e.exports={content:"ChatArea_content__3176g",header:"ChatArea_header__1y5n_",menu:"ChatArea_menu__2aFbV",conversation:"ChatArea_conversation__1Nbhw",footer:"ChatArea_footer__1PTOY",footerInner:"ChatArea_footerInner__3d7jQ",input:"ChatArea_input__2JA7M",btn:"ChatArea_btn__2ok6_"}},330:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(1),s=n.n(r),c=n(94),i=n.n(c),o=(n(163),n(6)),l={UI_SET_LOADING:"[UI] Set loading state",UI_SET_MESSAGE:"[UI] Set the message object for display an alert or hide it"},u=function(e,t){switch(t.type){case l.UI_SET_LOADING:return Object(o.a)(Object(o.a)({},e),{},{loading:t.payload});case l.UI_SET_MESSAGE:return Object(o.a)(Object(o.a)({},e),{},{message:t.payload});default:return e}},d={loading:!1,message:null},b=Object(r.createContext)(),j=function(e){var t=e.children,n=Object(r.useReducer)(u,d);return Object(a.jsx)(b.Provider,{value:n,children:t})},m=n(5),h=n.n(m),p=n(14),O=n(3),_=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",a=Object({NODE_ENV:"production",PUBLIC_URL:"/chat-group",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_URL;return"GET"===n?fetch("".concat(a,"/").concat(e)):fetch("".concat(a,"/").concat(e),{method:n,headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})},x=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",a=Object({NODE_ENV:"production",PUBLIC_URL:"/chat-group",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_URL,r=localStorage.getItem("chat-group:token")||"";return"GET"===n?fetch("".concat(a,"/").concat(e),{headers:{Authorization:"Bearer ".concat(r),"Content-Type":"application/json"}}):fetch("".concat(a,"/").concat(e),{method:n,headers:{Authorization:"Bearer ".concat(r),"Content-Type":"application/json"},body:JSON.stringify(t)})},v=function(e,t,n){var a=Object({NODE_ENV:"production",PUBLIC_URL:"/chat-group",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_URL,r=localStorage.getItem("chat-group:token")||"",s=new FormData;return s.append("image",t),fetch("".concat(a,"/").concat(e),{method:n,headers:{Authorization:"Bearer ".concat(r)},body:s})},f={uid:null,checking:!0,logged:!1},g=Object(r.createContext)(),N=function(e){var t=e.children,n=Object(r.useState)(f),s=Object(O.a)(n,2),c=s[0],i=s[1],o=Object(r.useContext)(b),u=Object(O.a)(o,2)[1],d=function(){var e=Object(p.a)(h.a.mark((function e(t){var n,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u({type:l.UI_SET_LOADING}),e.prev=1,e.next=4,_("/auth/register",t,"POST");case 4:return n=e.sent,e.next=7,n.json();case 7:if((a=e.sent).success){e.next=12;break}return u({type:l.UI_SET_LOADING}),u({type:l.UI_SET_MESSAGE,payload:{text:a.msg,severity:"error"}}),e.abrupt("return");case 12:return u({type:l.UI_SET_LOADING}),u({type:l.UI_SET_MESSAGE,payload:{text:a.msg,severity:"success"}}),e.abrupt("return","success");case 17:e.prev=17,e.t0=e.catch(1),console.log(e.t0),u({type:l.UI_SET_LOADING}),u({type:l.UI_SET_MESSAGE,payload:{text:"Something went wrong. Please try again later",severity:"error"}});case 22:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(p.a)(h.a.mark((function e(t){var n,a,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u({type:l.UI_SET_LOADING}),e.prev=1,e.next=4,_("/auth/login",t,"POST");case 4:return n=e.sent,e.next=7,n.json();case 7:if((a=e.sent).success){e.next=12;break}return u({type:l.UI_SET_LOADING}),u({type:l.UI_SET_MESSAGE,payload:{text:a.msg,severity:"error"}}),e.abrupt("return");case 12:u({type:l.UI_SET_LOADING}),r=a.user.uid,localStorage.setItem("chat-group:token",a.token),i({uid:r,checking:!1,logged:!0}),e.next=23;break;case 18:e.prev=18,e.t0=e.catch(1),console.log(e.t0),u({type:l.UI_SET_LOADING}),u({type:l.UI_SET_MESSAGE,payload:{text:"Something went wrong. Please try again later",severity:"error"}});case 23:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(t){return e.apply(this,arguments)}}(),m=Object(r.useCallback)(Object(p.a)(h.a.mark((function e(){var t,n,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(localStorage.getItem("chat-group:token")){e.next=4;break}return i({uid:null,checking:!1,logged:!1}),e.abrupt("return",!1);case 4:return e.next=6,x("auth/renewToken");case 6:if(401!==(t=e.sent).status){e.next=10;break}return i({uid:null,checking:!1,logged:!1}),e.abrupt("return",!1);case 10:return e.next=12,t.json();case 12:if(!(n=e.sent).success){e.next=18;break}return a=n.user.uid,localStorage.setItem("chat-group:token",n.token),i({uid:a,checking:!1,logged:!0}),e.abrupt("return",!0);case 18:return i({uid:null,checking:!1,logged:!1}),e.abrupt("return",!1);case 20:case"end":return e.stop()}}),e)}))),[]);return Object(a.jsx)(g.Provider,{value:{auth:c,register:d,login:j,logout:function(){localStorage.removeItem("chat-group:token"),i({uid:null,checking:!1,logged:!1})},verifyToken:m},children:t})},S=Object(r.createContext)(),y=function(e){var t=e.children,n=Object(r.useState)(null),s=Object(O.a)(n,2),c=s[0],i=s[1],u=Object(r.useContext)(b),d=Object(O.a)(u,2)[1],j=Object(r.useContext)(g).auth,m=function(e){d({type:l.UI_SET_MESSAGE,payload:e})},_=Object(r.useCallback)((function(e){d({type:l.UI_SET_LOADING,payload:e})}),[d]),f=Object(r.useCallback)(Object(p.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x("users/".concat(j.uid));case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,i(n.user),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),[j.uid]),N=function(){var e=Object(p.a)(h.a.mark((function e(t){var n,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(!0),e.prev=1,e.next=4,x("users/".concat(j.uid),t,"PUT");case 4:return n=e.sent,e.next=7,n.json();case 7:if((a=e.sent).success){e.next=12;break}return d({type:l.UI_SET_LOADING}),m({text:a.msg,severity:"error"}),e.abrupt("return");case 12:i(a.user),m({text:"Profile has been updated",severity:"success"}),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(1),console.log(e.t0),m({text:"An unexpected error occurred. Please try again later",severity:"error"});case 20:return e.prev=20,_(!1),e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[1,16,20,23]])})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(p.a)(h.a.mark((function e(t){var n,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(!0),e.prev=1,e.next=4,v("users/".concat(j.uid,"/photo"),t,"PUT");case 4:return n=e.sent,e.next=7,n.json();case 7:if((a=e.sent).success){e.next=12;break}return _(!1),m({text:a.msg,severity:"error"}),e.abrupt("return");case 12:i(Object(o.a)(Object(o.a)({},c),{},{photo:a.photo})),m({text:"Profile picture has been updated",severity:"success"}),e.next=21;break;case 16:e.prev=16,e.t0=e.catch(1),console.log(e.t0),m({text:"An unexpected error occurred. Please try again later",severity:"error"}),_(!1);case 21:return e.prev=21,_(!1),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[1,16,21,24]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)(S.Provider,{value:{user:c,getUser:f,editProfile:N,editPhoto:y},children:t})},C=n(11),w=n(8),E=n(66),A=function(e){var t=e.isLoggedIn,n=e.component,r=Object(E.a)(e,["isLoggedIn","component"]);return Object(a.jsx)(w.b,Object(o.a)(Object(o.a)({},r),{},{component:function(e){return t?Object(a.jsx)(w.a,{to:"/"}):Object(a.jsx)(n,Object(o.a)({},e))}}))},k=function(e){var t=e.isLoggedIn,n=e.component,r=Object(E.a)(e,["isLoggedIn","component"]);return Object(a.jsx)(w.b,Object(o.a)(Object(o.a)({},r),{},{component:function(e){return t?Object(a.jsx)(n,Object(o.a)({},e)):Object(a.jsx)(w.a,{to:"/auth/login"})}}))},I=(n(169),n(332)),T=n(333),L=n(334),P=n(45),M=n.n(P);var U=function(e){var t=e.message,n=e.severity,s=e.show,c=e.autoHideDuration,i=e.onHide,o=Object(r.useContext)(b),u=Object(O.a)(o,2)[1],d=Object(r.useState)(s),j=Object(O.a)(d,2),m=j[0],h=j[1],p=Object(r.useCallback)((function(){u({type:l.UI_SET_MESSAGE,payload:null})}),[u]);return Object(r.useEffect)((function(){s&&h(!0)}),[s]),Object(r.useEffect)((function(){if(c&&s){var e=setTimeout(i||p,c);return function(){return clearTimeout(e)}}}),[s,c,p,i]),m?Object(a.jsxs)("div",{role:"alert",onAnimationEnd:function(){s||h(!1)},className:"".concat(M.a.alert," ").concat(M.a[n]," ").concat(s?M.a.show:M.a.hide),children:["error"===n?Object(a.jsx)(I.a,{size:24}):"warning"===n?Object(a.jsx)(T.a,{size:24}):Object(a.jsx)(L.a,{size:24}),t]}):null},F=n(30),D=n(7),G=n(335),q=n(336),R=n(337),H=n(156),V=n.n(H);var B=function(){return Object(a.jsx)("div",{className:V.a.loader,role:"status","aria-label":"Loading..."})},z={name:"",email:"",password:""},W=D.c().shape({name:D.d().required("Your Name is Required"),email:D.d().email("A valid email is required").required("Email can't be empty"),password:D.d().min(8,"Password must be at least 8 characters long").required("Password is required")}),K={email:"",password:""},J=D.c().shape({email:D.d().email("A valid email is required").required("Email can't be empty"),password:D.d().min(8,"Password must be at least 8 characters long").required("Password is required")});var Y=function(e){var t=e.type,n=Object(r.useContext)(g),s=n.register,c=n.login,i=Object(r.useContext)(b),o=Object(O.a)(i,1)[0].loading,l=Object(F.a)({initialValues:"login"===t?K:z,validationSchema:"login"===t?J:W,onSubmit:function(e){if("login"===t)return void c(e);s(e).then((function(e){e&&l.resetForm()}))}});return Object(a.jsxs)("form",{className:"form",onSubmit:l.handleSubmit,children:["register"===t&&Object(a.jsxs)("div",{className:"form__group",children:[Object(a.jsx)("input",{onChange:l.handleChange,value:l.values.name,type:"text",className:"form__control",placeholder:"Your name","aria-label":"Type your name",name:"name",autoComplete:"off"}),Object(a.jsx)(G.a,{className:"form__icon"}),l.errors.name&&l.touched.name?Object(a.jsx)("div",{className:"form__feedback--error",children:l.errors.name}):null]}),Object(a.jsxs)("div",{className:"form__group",children:[Object(a.jsx)("input",{onChange:l.handleChange,value:l.values.email,type:"email",className:"form__control",placeholder:"Email","aria-label":"Type your emaill address",name:"email",autoComplete:"off"}),Object(a.jsx)(q.a,{className:"form__icon"}),l.errors.email&&l.touched.email?Object(a.jsx)("div",{className:"form__feedback--error",children:l.errors.email}):null]}),Object(a.jsxs)("div",{className:"form__group",children:[Object(a.jsx)("input",{onChange:l.handleChange,value:l.values.password,type:"password",name:"password",className:"form__control",placeholder:"Password","aria-label":"Type your password"}),Object(a.jsx)(R.a,{className:"form__icon"}),l.errors.password&&l.touched.password?Object(a.jsx)("div",{className:"form__feedback--error",children:l.errors.password}):null]}),Object(a.jsx)("button",{type:"submit",className:"btn btn--blue btn--full",disabled:o,children:o?Object(a.jsx)(B,{}):"login"===t?"Login":"Register"})]})};var Z=function(){var e=Object(r.useContext)(b),t=Object(O.a)(e,1)[0].message,n=Object(w.g)().pathname;return Object(a.jsxs)("div",{className:"auth-screen",children:[Object(a.jsx)(U,{show:null!==t,message:(null===t||void 0===t?void 0:t.text)||"",severity:(null===t||void 0===t?void 0:t.severity)||"error",autoHideDuration:3e3}),Object(a.jsxs)("div",{className:"box",children:["/auth/login"===n?Object(a.jsx)("h1",{className:"box__title",children:"Login"}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h1",{className:"box__title",children:"Stay connected with your team"}),Object(a.jsx)("p",{className:"box__description",children:"Communicate, share and talk with your work team"})]}),Object(a.jsx)(Y,{type:"/auth/login"===n?"login":"register"}),Object(a.jsxs)("p",{className:"box__text",children:["/auth/login"===n?"Don't have an account?":"Already have an account?"," ",Object(a.jsx)(C.b,{to:"/auth/login"===n?"/auth/register":"/auth/login",className:"box__link",children:"/auth/login"===n?"Signup":"Login"})]})]})]})},Q=function(){return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(w.d,{children:[Object(a.jsx)(w.b,{path:"/auth/login",component:Z}),Object(a.jsx)(w.b,{path:"/auth/register",component:Z}),Object(a.jsx)(w.a,{to:"/auth/login"})]})})},X=n(4),$=n.n(X),ee=n(343),te=n(341),ne=n(338),ae=n(98),re=n.n(ae);var se=function(){return Object(a.jsxs)("div",{className:re.a.box,children:[Object(a.jsx)("button",{type:"submit",className:"btn--icon",title:"Search Channel",children:Object(a.jsx)(ne.a,{})}),Object(a.jsx)("input",{type:"text",className:re.a.input,placeholder:"Search","aria-label":"Search"})]})},ce=n(340),ie=function(){var e=Object(r.useState)(!1),t=Object(O.a)(e,2),n=t[0],a=t[1];return[n,function(){return a(!n)},function(){return a(!0)},function(){return a(!1)}]},oe=n(99),le=n.n(oe);var ue=function(e){var t=e.url,n=e.name;return t?Object(a.jsx)("img",{className:le.a.avatar,src:t,alt:n}):Object(a.jsx)("div",{className:le.a.div})},de=n(339),be=n(12),je=n.n(be);var me=function(e){var t=e.isOpen,n=Object(r.useContext)(g).logout;return Object(a.jsxs)("div",{className:"".concat(je.a.menu," ").concat(t?je.a.visible:""),children:[Object(a.jsxs)(C.b,{to:"/profile",className:je.a.option,children:[Object(a.jsx)(G.a,{className:je.a.icon}),"Profile"]}),Object(a.jsx)("div",{className:"line"}),Object(a.jsxs)("button",{className:je.a.option,onClick:n,children:[Object(a.jsx)(de.a,{className:je.a.icon}),"Logout"]})]})},he=n(100),pe=n.n(he);var Oe=function(){var e=Object(r.useContext)(S).user,t=ie(),n=Object(O.a)(t,2),s=n[0],c=n[1];return Object(a.jsxs)("div",{className:pe.a.footer,children:[Object(a.jsx)(ue,{name:(null===e||void 0===e?void 0:e.name)||"",url:(null===e||void 0===e?void 0:e.photo)||""}),Object(a.jsx)("p",{className:pe.a.username,children:null===e||void 0===e?void 0:e.name}),Object(a.jsx)("button",{className:"btn--icon relative",onClick:c,children:Object(a.jsx)(ce.a,{})}),Object(a.jsx)(me,{isOpen:s})]})},_e=n(20),xe=n.n(_e);var ve=function(e){var t=e.id,n=e.name,s=e.photo,c=e.members,i=e.uppercase,o=e.handleClick,l=e.setChannelView,u=e.selectChannel,d=e.getMembers,b=Object(r.useContext)(g).auth;return o?Object(a.jsx)("li",{className:xe.a.sidebarListItem,onClick:function(){u(t),l(),!c&&d(t)},children:Object(a.jsx)("p",{className:"".concat(xe.a.sidebarListItemName," ").concat(i?xe.a.uppercase:""),children:n})}):Object(a.jsxs)("li",{className:"".concat(xe.a.sidebarListItem," ").concat(xe.a.grid),children:[Object(a.jsx)(ue,{url:s,name:n}),Object(a.jsxs)("p",{className:"".concat(xe.a.sidebarListItemName," ").concat(i?xe.a.uppercase:""),children:[n," ",t===b.uid&&"(Your)"]})]})};var fe=function(e){var t=e.items,n=e.channel,s=e.uppercase,c=e.handleClick,i=e.addMember,o=e.setChannelView,l=e.selectChannel,u=e.getMembers,d=e.openModal,b=Object(r.useContext)(g).auth;return Object(a.jsxs)("ul",{className:$.a.list,children:[t.map((function(e){return Object(a.jsx)(ve,{id:e._id,name:e.name,photo:e.photo,members:null===e||void 0===e?void 0:e.members,uppercase:s,getMembers:u,handleClick:c,selectChannel:l,setChannelView:o},e._id)})),i&&b.uid===(null===n||void 0===n?void 0:n.creator)&&Object(a.jsxs)("li",{className:"".concat(xe.a.sidebarListItem," ").concat(xe.a.grid),onClick:function(){return d("invite-member")},children:[Object(a.jsx)("button",{className:"btn--icon btn--gray",title:"Invite a new member to the channel",children:Object(a.jsx)(te.a,{})}),Object(a.jsx)("p",{className:xe.a.sidebarListItemName,children:"Add member"})]})]})};var ge=function(e){var t=e.channels,n=e.show,r=e.setSidebarView,s=e.getMembers,c=e.selectChannel,i=e.openModal;return n?Object(a.jsxs)("div",{className:$.a.inner,children:[Object(a.jsxs)("div",{className:$.a.top,children:[Object(a.jsx)("h3",{className:$.a.title,children:"Channels"}),Object(a.jsx)("button",{className:"btn--icon btn--gray",title:"Create new channel",onClick:i,children:Object(a.jsx)(te.a,{})})]}),Object(a.jsx)("div",{className:$.a.space,children:Object(a.jsx)(se,{})}),Object(a.jsx)(fe,{handleClick:!0,selectChannel:c,items:t,uppercase:!0,setChannelView:function(){r("info")},getMembers:s}),Object(a.jsx)(Oe,{})]}):null},Ne=n(342);var Se=function(e){var t=e.channel,n=e.show,s=e.setSidebarView,c=e.openModal,i=Object(r.useState)(n),o=Object(O.a)(i,2),l=o[0],u=o[1],d=(null===t||void 0===t?void 0:t.members)||[];return Object(r.useEffect)((function(){n&&u(!0)}),[n]),l?Object(a.jsxs)("div",{className:"".concat($.a.inner," ").concat(n?$.a.show:$.a.hide),onAnimationEnd:function(){n||u(!1)},children:[Object(a.jsxs)("div",{className:$.a.top,children:[Object(a.jsx)("button",{className:"btn--icon",title:"Back to all channels",onClick:function(e){var t=e.target.parentElement.parentElement;t.classList.add($.a.hide),t.addEventListener("animationend",(function(){s("all")}))},children:Object(a.jsx)(Ne.a,{})}),Object(a.jsx)("h3",{className:$.a.title,children:"All channels"})]}),Object(a.jsxs)("div",{className:$.a.channelInfo,children:[Object(a.jsx)("h4",{children:null===t||void 0===t?void 0:t.name}),Object(a.jsx)("p",{children:null===t||void 0===t?void 0:t.description})]}),Object(a.jsx)("h4",{className:$.a.membersTitle,children:"Members"}),Object(a.jsx)(fe,{items:d,channel:t,addMember:!0,openModal:c}),Object(a.jsx)(Oe,{})]}):null},ye=Object(r.forwardRef)((function(e,t){var n=e.channels,s=e.selectedChannel,c=e.hideSidebar,i=e.openModal,o=e.selectChannel,l=e.getMembers,u=Object(r.useState)("all"),d=Object(O.a)(u,2),b=d[0],j=d[1];return Object(a.jsxs)("div",{className:$.a.overlay,ref:t,children:[Object(a.jsxs)("aside",{className:$.a.sidebar,children:[Object(a.jsx)(ge,{channels:n,selectChannel:o,getMembers:l,setSidebarView:j,show:"all"===b,openModal:i}),Object(a.jsx)(Se,{setSidebarView:j,channel:s,show:"info"===b,openModal:i})]}),Object(a.jsx)("button",{className:"btn--icon ".concat($.a.close),onClick:c,children:Object(a.jsx)(ee.a,{color:"#fff",size:24})})]})})),Ce=n(344),we=n(345),Ee=n(27),Ae=n.n(Ee),ke=n(39),Ie=n.n(ke);var Te=function(){return Object(a.jsxs)("div",{className:Ie.a.message,children:[Object(a.jsx)(ue,{}),Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:Ie.a.metadata,children:[Object(a.jsx)("p",{className:Ie.a.sender,children:"Armando Cruz"}),Object(a.jsx)("small",{className:Ie.a.timestamp,children:"yesterday at 2:29 PM"})]}),Object(a.jsx)("p",{className:Ie.a.text,children:"Lorem ipsum dolor \ud83e\udd26\u200d\u2642\ufe0fsit, amet consectetur adipisicing elit. Labore dolorum voluptas illo praesentium nulla\ud83d\udc46 excepturi aperiam magni veniam dolore sequi! \ud83d\udc71\u200d\u2640\ufe0f"})]})]})},Le=n(101),Pe=n.n(Le);var Me=function(e){var t=e.date;return Object(a.jsx)("div",{className:Pe.a.separator,children:Object(a.jsx)("small",{className:Pe.a.date,children:t})})};var Ue=function(e){var t=e.toggleSidebar,n=e.channel;return Object(a.jsxs)("main",{className:Ae.a.content,children:[Object(a.jsxs)("header",{className:Ae.a.header,children:[Object(a.jsx)("button",{className:"btn--icon ".concat(Ae.a.menu),onClick:t,children:Object(a.jsx)(Ce.a,{color:"#fff",size:24})}),Object(a.jsx)("h1",{className:"h1",children:null===n||void 0===n?void 0:n.name})]}),Object(a.jsxs)("div",{className:Ae.a.conversation,children:[Object(a.jsx)(Te,{}),Object(a.jsx)(Te,{}),Object(a.jsx)(Te,{}),Object(a.jsx)(Te,{}),Object(a.jsx)(Te,{}),Object(a.jsx)(Te,{}),Object(a.jsx)(Te,{}),Object(a.jsx)(Me,{date:"October 10, 2020"}),Object(a.jsx)(Te,{}),Object(a.jsx)(Te,{}),Object(a.jsx)(Te,{}),Object(a.jsx)(Te,{}),Object(a.jsx)(Te,{}),Object(a.jsx)(Te,{}),Object(a.jsx)(Te,{})]}),Object(a.jsx)("div",{className:Ae.a.footer,children:Object(a.jsxs)("div",{className:Ae.a.footerInner,children:[Object(a.jsx)("input",{type:"text",className:Ae.a.input,placeholder:"Type a message here","aria-label":"Type a message"}),Object(a.jsx)("button",{className:"btn--icon btn--blue ".concat(Ae.a.btn),title:"Send message",children:Object(a.jsx)(we.a,{size:20})})]})})]})},Fe=n(46),De=n.n(Fe);var Ge=function(e){var t=e.open,n=e.onClose,s=e.children,c=Object(r.useState)(t),i=Object(O.a)(c,2),o=i[0],l=i[1];return Object(r.useEffect)((function(){t&&l(!0)}),[t]),o?Object(a.jsx)("div",{className:De.a.overlay,onClick:n,onAnimationEnd:function(){t||l(!1)},children:Object(a.jsx)("div",{onClick:function(e){return e.stopPropagation()},className:"".concat(De.a.content," ").concat(t?De.a.open:De.a.hidden),children:s})}):null},qe=n(13),Re=n(15),He=n.n(Re),Ve={name:"",description:""},Be=D.c().shape({name:D.d().required("The channel name is required"),description:D.d().required("The channel description is required")});var ze=function(e){var t=e.loading,n=e.setLoading,s=e.closeModal,c=e.showAlert,i=e.setChannels,l=Object(r.useContext)(g).auth,u=function(){var e=Object(p.a)(h.a.mark((function e(t){var a,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(!0),e.prev=1,e.next=4,x("channels",Object(o.a)(Object(o.a)({},t),{},{creator:l.uid}),"POST");case 4:return a=e.sent,e.next=7,a.json();case 7:if((r=e.sent).success){e.next=13;break}return n(!1),s(),c({text:r.msg,severity:"error"}),e.abrupt("return");case 13:i((function(e){return[].concat(Object(qe.a)(e),[r.channel])})),s(),c({text:"The channel has been created",severity:"success"}),e.next=23;break;case 18:e.prev=18,e.t0=e.catch(1),console.log(e.t0),s(),c({text:"An unexpected error occurred. Please try again later",severity:"error"});case 23:return e.prev=23,n(!1),e.finish(23);case 26:case"end":return e.stop()}}),e,null,[[1,18,23,26]])})));return function(t){return e.apply(this,arguments)}}(),d=Object(F.a)({initialValues:Ve,validationSchema:Be,onSubmit:function(e){u(e)}});return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h2",{className:He.a.title,children:"New Channel"}),Object(a.jsxs)("form",{onSubmit:d.handleSubmit,autoComplete:"off",children:[Object(a.jsx)("input",{type:"text",className:He.a.input,placeholder:"Channel name","aria-label":"Channel name",name:"name",value:d.values.name,onChange:d.handleChange}),d.errors.name&&d.touched.name?Object(a.jsx)("div",{className:"form__feedback--error",children:d.errors.name}):null,Object(a.jsx)("textarea",{className:He.a.textarea,placeholder:"Channel description","aria-label":"Channel description",value:d.values.description,onChange:d.handleChange,name:"description"}),d.errors.description&&d.touched.description?Object(a.jsx)("div",{className:"form__feedback--error",children:d.errors.description}):null,Object(a.jsx)("button",{type:"submit",className:"btn btn--blue ".concat(He.a.btn),disabled:t,children:t?Object(a.jsx)(B,{}):"Save"})]})]})},We=n(157),Ke={emails:[]},Je=[32,13];var Ye=function(e){var t=e.loading,n=e.channel,r=e.setLoading,s=e.closeModal,c=e.showAlert,i=function(){var e=Object(p.a)(h.a.mark((function e(t){var a,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(!0),e.prev=1,e.next=4,x("channels/".concat(n._id),{emails:t},"POST");case 4:return a=e.sent,e.next=7,a.json();case 7:if((i=e.sent).success){e.next=13;break}return r(!1),s(),c({text:i.msg,severity:"error"}),e.abrupt("return");case 13:s(),c({text:"Invitations sent",severity:"success"}),e.next=22;break;case 17:e.prev=17,e.t0=e.catch(1),console.log(e.t0),s(),c({text:"An unexpected error occurred. Please try again later",severity:"error"});case 22:return e.prev=22,r(!1),e.finish(22);case 25:case"end":return e.stop()}}),e,null,[[1,17,22,25]])})));return function(t){return e.apply(this,arguments)}}();D.a(D.d,"isUnique",(function(e,t){return this.test("isUnique",e,(function(t){return!n.members.map((function(e){return e.email})).includes(t)||this.createError({path:"emails",message:e})}))}));var o=D.c().shape({emails:D.b().of(D.c().shape({id:D.d(),text:D.d().email("A valid email is required").required("Email can't be empty").isUnique("Add emails from people who do not belongs to the channel")})).min(1,"Type at least one email")}),l=Object(F.a)({initialValues:Ke,validationSchema:o,onSubmit:function(e){var t=e.emails.map((function(e){return e.text}));i(t)}}),u=l.values.emails;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h2",{className:He.a.title,children:"Invite members"}),Object(a.jsxs)("form",{onSubmit:l.handleSubmit,autoComplete:"off",children:[Object(a.jsx)("label",{htmlFor:"members",children:"Type the email address"}),Object(a.jsx)(We.WithContext,{classNames:{tags:"".concat(He.a.textarea," ").concat(He.a.tags),tag:He.a.tag,remove:He.a.remove,selected:He.a.selected,tagInput:He.a.tagInput,tagInputField:He.a.tagInputField},tags:u,allowDragDrop:!1,handleAddition:function(e){l.setFieldValue("emails",[].concat(Object(qe.a)(u),[e]))},handleDelete:function(e){l.setFieldValue("emails",u.filter((function(t,n){return n!==e})))},delimiters:Je,id:"members",name:"members",placeholder:0===u.length?"Press space or enter to add a new email":""}),l.errors.emails?Object(a.jsx)("div",{className:"form__feedback--error",children:"string"===typeof l.errors.emails?l.errors.emails:"A valid email is required"}):null,Object(a.jsx)("button",{type:"submit",className:"btn btn--blue ".concat(He.a.btn),disabled:t,children:t?Object(a.jsx)(B,{}):"Invite"})]})]})};var Ze=function(){var e=Object(r.useContext)(g).auth,t=Object(r.useContext)(S),n=t.user,s=t.getUser,c=Object(r.useState)(!1),i=Object(O.a)(c,2),l=i[0],u=i[1],d=Object(r.useState)(null),b=Object(O.a)(d,2),j=b[0],m=b[1],_=function(e){return m(e)},v=Object(r.useCallback)((function(){return m(null)}),[]),f=function(){var e=Object(r.useRef)();return[e,function(){e.current.classList.toggle($.a.overlayShow),e.current.firstElementChild.classList.toggle($.a.sidebarShow)},function(){e.current.classList.add($.a.overlayShow),e.current.firstElementChild.classList.add($.a.sidebarShow)},function(){e.current.classList.remove($.a.overlayShow),e.current.firstElementChild.classList.remove($.a.sidebarShow)}]}(),N=Object(O.a)(f,4),y=N[0],C=N[1],w=N[3];Object(r.useEffect)((function(){n||s()}),[n,s]);var E=Object(r.useState)(!1),A=Object(O.a)(E,2),k=A[0],I=A[1],T=Object(r.useState)("add-channel"),L=Object(O.a)(T,2),P=L[0],M=L[1],F=function(){return I(!1)},D=Object(r.useState)([]),G=Object(O.a)(D,2),q=G[0],R=G[1];Object(r.useEffect)((function(){(function(){var t=Object(p.a)(h.a.mark((function t(){var n,a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u(!0),t.prev=1,t.next=4,x("membership/".concat(e.uid));case 4:return n=t.sent,t.next=7,n.json();case 7:if((a=t.sent).success){t.next=12;break}return u(!1),_({text:a.msg,severity:"warning"}),t.abrupt("return");case 12:R(a.channels.map((function(e){return e.channel}))),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(1),console.log(t.t0),_({text:"Something went wrong. Please try again later",severity:"error"});case 19:return t.prev=19,u(!1),t.finish(19);case 22:case"end":return t.stop()}}),t,null,[[1,15,19,22]])})));return function(){return t.apply(this,arguments)}})()()}),[e]);var H=Object(r.useState)(null),V=Object(O.a)(H,2),B=V[0],z=V[1],W=function(){var e=Object(p.a)(h.a.mark((function e(t){var n,a,r,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.prev=1,e.next=4,x("channels/".concat(t,"/members"));case 4:return n=e.sent,e.next=7,n.json();case 7:if(a=e.sent,console.log(a),a.success){e.next=13;break}return u(!1),_({text:a.msg,severity:"warning"}),e.abrupt("return");case 13:r=a.members.map((function(e){return e.user})),s=q.map((function(e){return e._id===t?Object(o.a)(Object(o.a)({},e),{},{members:r}):e})),R(s),z((function(e){return Object(o.a)(Object(o.a)({},e),{},{members:r})})),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(1),console.log(e.t0),_({text:"Something went wrong. Please try again later",severity:"error"});case 23:return e.prev=23,u(!1),e.finish(23);case 26:case"end":return e.stop()}}),e,null,[[1,19,23,26]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(U,{show:null!==j,message:(null===j||void 0===j?void 0:j.text)||"",severity:(null===j||void 0===j?void 0:j.severity)||"error",autoHideDuration:3e3,onHide:v}),Object(a.jsx)(ye,{channels:q,selectedChannel:B,selectChannel:function(e){var t=q.find((function(t){return t._id===e}))||null;z(t)},getMembers:W,openModal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"add-channel";M("invite-member"===e?"invite-member":"add-channel"),I(!0)},hideSidebar:w,ref:y}),Object(a.jsx)(Ue,{channel:B,toggleSidebar:C}),Object(a.jsx)(Ge,{open:k,onClose:F,children:"add-channel"===P?Object(a.jsx)(ze,{loading:l,setLoading:u,showAlert:_,setChannels:R,closeModal:F}):Object(a.jsx)(Ye,{loading:l,channel:B,setLoading:u,showAlert:_,closeModal:F})})]})},Qe=(n(150),n(346));var Xe=function(e){var t=e.isOpen,n=Object(r.useContext)(g).logout;return Object(a.jsxs)("div",{className:"".concat(je.a.menu," ").concat(je.a.profile," ").concat(t?je.a.visible:""),children:[Object(a.jsxs)(C.b,{className:je.a.option,to:"/profile",children:[Object(a.jsx)(G.a,{className:je.a.icon}),"My Profile"]}),Object(a.jsxs)(C.b,{to:"/",className:je.a.option,children:[Object(a.jsx)(Qe.a,{className:je.a.icon}),"Group Chat"]}),Object(a.jsx)("div",{className:"line"}),Object(a.jsxs)("button",{className:je.a.option,onClick:n,children:[Object(a.jsx)(de.a,{className:je.a.icon}),"Logout"]})]})};var $e=function(e){var t=e.photo,n=e.username,r=ie(),s=Object(O.a)(r,2),c=s[0],i=s[1];return Object(a.jsxs)("header",{className:"header",children:[Object(a.jsx)(ue,{name:n,url:t}),Object(a.jsx)("p",{className:"user-name",children:n}),Object(a.jsx)("button",{className:"btn--icon btn--show-more",onClick:i,children:Object(a.jsx)("span",{children:"\u25b2"})}),Object(a.jsx)(Xe,{isOpen:c})]})};var et=function(){var e=Object(r.useContext)(S),t=e.user,n=e.getUser;return Object(r.useEffect)((function(){t||n()}),[t,n]),Object(a.jsxs)("div",{className:"profile",children:[Object(a.jsx)($e,{username:(null===t||void 0===t?void 0:t.name)||"",photo:(null===t||void 0===t?void 0:t.photo)||""}),Object(a.jsx)("h1",{className:"h1",children:"Personal info"}),Object(a.jsx)("p",{className:"description",children:"Basic info, like your name and photo"}),Object(a.jsxs)("div",{className:"profile__container",children:[Object(a.jsxs)("div",{className:"profile__section profile__section--top",children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("h2",{children:"Profile"}),Object(a.jsx)("p",{children:"Some info may be visible to other people"})]}),Object(a.jsx)(C.b,{to:"/profile/edit",className:"btn btn--outline",children:"Edit"})]}),Object(a.jsxs)("div",{className:"profile__section",children:[Object(a.jsx)("h3",{className:"profile__section-title",children:"Photo"}),Object(a.jsx)(ue,{url:null===t||void 0===t?void 0:t.photo,name:null===t||void 0===t?void 0:t.name})]}),Object(a.jsxs)("div",{className:"profile__section",children:[Object(a.jsx)("h3",{className:"profile__section-title",children:"Name"}),Object(a.jsx)("p",{className:"profile__section-text",children:null===t||void 0===t?void 0:t.name})]}),Object(a.jsxs)("div",{className:"profile__section",children:[Object(a.jsx)("h3",{className:"profile__section-title",children:"Bio"}),Object(a.jsx)("p",{className:"profile__section-text",children:null===t||void 0===t?void 0:t.bio})]}),Object(a.jsxs)("div",{className:"profile__section",children:[Object(a.jsx)("h3",{className:"profile__section-title",children:"Phone"}),Object(a.jsx)("p",{className:"profile__section-text",children:null===t||void 0===t?void 0:t.phone})]}),Object(a.jsxs)("div",{className:"profile__section",children:[Object(a.jsx)("h3",{className:"profile__section-title",children:"Email"}),Object(a.jsx)("p",{className:"profile__section-text",children:null===t||void 0===t?void 0:t.email})]})]})]})},tt=n(347),nt=["image/png","image/jpeg"],at=D.c().shape({name:D.d().required("Your Name is Required")});var rt=function(){var e=Object(r.useContext)(b),t=Object(O.a)(e,2),n=t[0],s=t[1],c=n.message,i=n.loading,o=Object(r.useContext)(S),u=o.user,d=o.getUser,j=o.editProfile,m=o.editPhoto,h=function(e){s({type:l.UI_SET_MESSAGE,payload:e})},p=Object(F.a)({initialValues:{name:(null===u||void 0===u?void 0:u.name)||"",bio:(null===u||void 0===u?void 0:u.bio)||"",phone:(null===u||void 0===u?void 0:u.phone)||""},enableReinitialize:!0,validationSchema:at,onSubmit:function(e){j(e)}});Object(r.useEffect)((function(){u||d()}),[u,d]);var _=Object(r.useRef)();return Object(a.jsxs)("div",{className:"profile",children:[Object(a.jsx)(U,{show:null!==c,message:(null===c||void 0===c?void 0:c.text)||"",severity:(null===c||void 0===c?void 0:c.severity)||"error",autoHideDuration:3e3}),Object(a.jsx)($e,{username:(null===u||void 0===u?void 0:u.name)||"",photo:(null===u||void 0===u?void 0:u.photo)||""}),Object(a.jsx)("div",{className:"container",children:Object(a.jsxs)(C.b,{to:"/profile",className:"btn--icon btn--back",children:[Object(a.jsx)(Ne.a,{}),Object(a.jsx)("span",{className:"btn__text",children:"Back"})]})}),Object(a.jsx)("div",{className:"profile__container",children:Object(a.jsxs)("div",{className:"profile__container-inner",children:[Object(a.jsx)("h1",{className:"h1 text-left",children:"Change Info"}),Object(a.jsx)("p",{className:"description text-left",children:"Changes will be reflected to every services"}),Object(a.jsxs)("form",{className:"profile__form",autoComplete:"off",onSubmit:p.handleSubmit,children:[Object(a.jsxs)("div",{className:"form__image",children:[Object(a.jsxs)("div",{className:"profile__image-container",children:[Object(a.jsx)(ue,{url:null===u||void 0===u?void 0:u.photo,name:null===u||void 0===u?void 0:u.name}),Object(a.jsx)("label",{htmlFor:"image",children:Object(a.jsx)(tt.a,{size:32})})]}),Object(a.jsx)("label",{htmlFor:"image",className:"form__image-label",children:"Change photo"}),Object(a.jsx)("input",{multiple:!1,accept:"image/png,image/jpeg",onChange:function(e){var t=e.target.files[0];nt.includes(t.type)?t.size/1e3/1e3>10?h({text:"Maximum size is 10 MB",severity:"warning"}):_.current=t:h({text:"Image must be a .png or .jpg",severity:"warning"})},type:"file",name:"image",id:"image",className:"hidden"}),Object(a.jsx)("button",{onClick:function(){console.log(_.current),_.current?m(_.current):h({text:"To update the profile picture. Select a new one",severity:"error"})},type:"button",className:"btn btn--blue",disabled:i,children:i?Object(a.jsx)(B,{}):"Update Photo"})]}),Object(a.jsxs)("div",{className:"form__group",children:[Object(a.jsx)("label",{htmlFor:"name",className:"form__label",children:"Name"}),Object(a.jsx)("input",{type:"text",className:"form__control",id:"name",name:"name",value:p.values.name,onChange:p.handleChange}),p.errors.name&&p.touched.name?Object(a.jsx)("div",{className:"form__feedback--error",children:p.errors.name}):null]}),Object(a.jsxs)("div",{className:"form__group",children:[Object(a.jsx)("label",{htmlFor:"bio",className:"form__label",children:"Bio"}),Object(a.jsx)("textarea",{className:"form__control",id:"bio",name:"bio",value:p.values.bio,onChange:p.handleChange})]}),Object(a.jsxs)("div",{className:"form__group",children:[Object(a.jsx)("label",{htmlFor:"phone",className:"form__label",children:"Phone"}),Object(a.jsx)("input",{type:"tel",className:"form__control",id:"phone",name:"phone",value:p.values.phone,onChange:p.handleChange})]}),Object(a.jsx)("button",{type:"submit",className:"btn btn--blue",disabled:i,children:i?Object(a.jsx)(B,{}):"Save"})]})]})})]})},st=function(){return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(w.d,{children:[Object(a.jsx)(w.b,{path:"/profile/edit",component:rt}),Object(a.jsx)(w.b,{path:"/profile",component:et}),Object(a.jsx)(w.b,{path:"/",component:Ze}),Object(a.jsx)(w.a,{to:"/"})]})})};var ct=function(){var e=Object(r.useContext)(g),t=e.verifyToken,n=e.auth;return Object(r.useEffect)((function(){t()}),[t]),n.checking?Object(a.jsx)("div",{className:"overlay",children:Object(a.jsx)(B,{})}):Object(a.jsx)(C.a,{basename:"/chat-group",children:Object(a.jsx)("div",{className:"app",children:Object(a.jsxs)(w.d,{children:[Object(a.jsx)(A,{path:"/auth",component:Q,isLoggedIn:n.logged}),Object(a.jsx)(k,{path:"/",component:st,isLoggedIn:n.logged}),Object(a.jsx)(w.a,{to:"/auth/login"})]})})})};var it=function(){return Object(a.jsx)(j,{children:Object(a.jsx)(N,{children:Object(a.jsx)(y,{children:Object(a.jsx)(ct,{})})})})},ot=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,348)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),s(e),c(e)}))};i.a.render(Object(a.jsxs)(s.a.StrictMode,{children:[Object(a.jsx)(it,{}),","]}),document.getElementById("root")),ot()},39:function(e,t,n){e.exports={message:"Message_message__3JPQk",metadata:"Message_metadata__1uNfL",sender:"Message_sender__3Lzxo",timestamp:"Message_timestamp__1vyjI",text:"Message_text__2ZMIu"}},4:function(e,t,n){e.exports={overlay:"Sidebar_overlay__1sf-N",overlayShow:"Sidebar_overlayShow__H2voS",sidebar:"Sidebar_sidebar__3ohmy",inner:"Sidebar_inner__3bqB4",sidebarShow:"Sidebar_sidebarShow__1ohct",show:"Sidebar_show__zdwMe","slide-right-in":"Sidebar_slide-right-in__LJGnd",hide:"Sidebar_hide__OS-OQ","slide-right-out":"Sidebar_slide-right-out__26q1w",top:"Sidebar_top__1hTQ-",title:"Sidebar_title__Pqkkg",space:"Sidebar_space__2djvV",channelInfo:"Sidebar_channelInfo__HjUkg",membersTitle:"Sidebar_membersTitle__XlF1H",close:"Sidebar_close__1gJyf",list:"Sidebar_list__3O_AJ"}},45:function(e,t,n){e.exports={alert:"Alert_alert__2ZTaC",show:"Alert_show__2oxu6",enter:"Alert_enter__2tbgn",hide:"Alert_hide__1-1PC",exit:"Alert_exit__sk22i",error:"Alert_error__3wCNA",success:"Alert_success__170Nu",warning:"Alert_warning__1U8JG",close:"Alert_close__151Ks"}},46:function(e,t,n){e.exports={overlay:"Modal_overlay__2GvHZ",content:"Modal_content__2W_oT",open:"Modal_open__yfL7n","modal-in":"Modal_modal-in__2F16g",hidden:"Modal_hidden__3cSA2","modal-out":"Modal_modal-out__1ofCf"}},98:function(e,t,n){e.exports={box:"SearchBox_box__19_SF",input:"SearchBox_input__B8kT9"}},99:function(e,t,n){e.exports={div:"Avatar_div__3yF0r",avatar:"Avatar_avatar__2OXes"}}},[[330,1,2]]]);
//# sourceMappingURL=main.67b4f314.chunk.js.map